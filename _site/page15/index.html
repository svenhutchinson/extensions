<!DOCTYPE html>
<html lang="en-us">

  <head>
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">

  <!-- Enable responsiveness on mobile devices-->
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  <title>
    
      Hyde &middot; A Jekyll theme, with instant search
    
  </title>

  <!-- CSS -->
  <link rel="stylesheet" href="/algoliasearch-jekyll-hyde/public/css/poole.css">
  <link rel="stylesheet" href="/algoliasearch-jekyll-hyde/public/css/syntax.css">
  <link rel="stylesheet" href="/algoliasearch-jekyll-hyde/public/css/hyde.css">
  <link rel="stylesheet" href="/algoliasearch-jekyll-hyde/public/css/algolia.css">
  <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=PT+Sans:400,400italic,700|Abril+Fatface">

  <!-- Icons -->
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/algoliasearch-jekyll-hyde/public/apple-touch-icon-144-precomposed.png">
                                 <link rel="shortcut icon" href="/algoliasearch-jekyll-hyde/public/favicon.ico">

  <!-- RSS -->
  <link rel="alternate" type="application/rss+xml" title="RSS" href="/atom.xml">
</head>


  <body class="theme-base-09">

    <div class="sidebar">
  <div class="container sidebar-sticky">
    <div class="sidebar-about">
      <h1>
        <a href="/algoliasearch-jekyll-hyde/">
          Hyde
        </a>
      </h1>
      <p class="lead">The popular <a href="http://hyde.getpoole.com/" target="_blank">Hyde theme</a> for <a href="http://jekyllrb.com" target="_blank">Jekyll</a>, now with instant-search capabilities. Made by <a href="https://twitter.com/mdo" target="_blank">@mdo</a> and <a href="https://www.algolia.com/" target="_blank">Algolia</a></p>
    </div>

    <input type="text" class="algolia__input js-algolia__input" autocomplete="off" name="query" placeholder="Search in this site..." />

    <nav class="sidebar-nav">
      <a class="sidebar-nav-item" href="/algoliasearch-jekyll-hyde/">Home</a>

      

      
      
        
          
        
      
        
          
          <a class="sidebar-nav-item" href="/algoliasearch-jekyll-hyde/about/">About</a>
          
        
      
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      

      <a class="sidebar-nav-item" href="https://github.com/algolia/algoliasearch-jekyll-hyde">GitHub project</a>
      <span class="sidebar-nav-item">Currently v2.1.0</span>
    </nav>

    <p>&copy; 2016. All rights reserved.</p>
  </div>
</div>


    <div class="content container">
      <div class="algolia__initial-content js-algolia__initial-content"><div class="posts">
  
  <div class="post">
    <h1 class="post-title">
      <a href="/algoliasearch-jekyll-hyde/2012/08/16/algolia-search-beta-is-out/">
        Algolia Search beta is out!
      </a>
    </h1>

    <span class="post-date">16 Aug 2012</span>

    <p><a href="https://blog.algolia.com/wp-
content/uploads/2012/08/searchForEvernoteSmall.png"><img src="/algoliasearch-jekyll-hyde/assets/searchForEvernoteSmall.png" alt="" /></a>After a few months in the
making, our first mobile library is finally ready to hit the shelves! Well,
nearly! Before releasing it, we want all the feedback you can give us to
ensure it’s bug-free, easy to use and responsive to your needs.</p>

<p>If you subscribed to the beta, you should already have received your access
info. If not, you can request it directly on www.algolia.com.</p>

<p>You’ll be able to download both the iOS and the Android versions, along with
all necessary documentation. Feel free to ask for any clarification or
additional info. We’ll do a few technical posts which explore the product
internals in the coming months.</p>

<p>We’re now eager to read your feedback! You just have one address to remember
to report bugs, request features, or anything beta related: beta@algolia.com</p>

<p>Enjoy!</p>


  </div>
  
  <div class="post">
    <h1 class="post-title">
      <a href="/algoliasearch-jekyll-hyde/2012/08/01/free-marketing-wwdc2012/">
        Free marketing @ WWDC 2012!
      </a>
    </h1>

    <span class="post-date">01 Aug 2012</span>

    <p>Let’s rewind time a bit. Back in June was the famous Apple Developer
Conference, aka WWDC 2012. Algolia didn’t even have a website at that time,
but what we did have is a friend who would attend:
<a href="https://twitter.com/sarfata/">Thomas</a>! That was an occasion we could not
pass!</p>

<p>Thomas agreed to speak about us a bit and to invite people to visit our
website. That simple action defined our deadline to have a website up and
running. But wait! That would be better if people could also find the site
when Googling our company name. That meant a few days to allow for indexing…
and a tight deadline!</p>

<p>About two weeks of brainstorming and implementation went into the <a href="http://www.algolia.com">web
site</a>. Our goal was to have a clear presentation of
our mobile search lib… and to be found on Google! And you know what? It’s
damn difficult to do so in so short a time! Our site was up and running two
days before the conf and we immediately submitted it to all search engines.
Unfortunately we were not in first position when Googling for Algolia :(</p>

<p>Fortunately, things improved without delay. Two actions were particularly
useful in helping our search rankings: our participation to the <a href="http://blog.algolia.com/were-participating-to-the-evernote-devcup/">Evernote
DevCup</a>,
and our blog opening! We quickly got the pole position for our brand and
started to rank well for some key queries like <a href="https://www.google.com/search?q=mobile+instant+suggest">mobile instant
suggest</a> :)</p>

<p>We also thought about creating some posters that explain our technology, but
eventually we were so concentrated on the web site that we passed.</p>

<p>Result: Some awareness, one subscription to beta and more importantly, a
running website! Next marketing related action would be to have a demo ready
for LeWeb in London, but that’s <a href="http://blog.algolia.com/great-discussions-at-leweb12-london/">another story</a>…</p>

<p>And here is what you could see on WWDC whiteboards:</p>

<p><a href="https://blog.algolia.com/wp-
content/uploads/2012/07/wwdc1.jpg"><img src="/algoliasearch-jekyll-hyde/assets/wwdc1.jpg" alt="WWDC Message 1" /></a></p>

<p><a href="https://blog.algolia.com/wp-
content/uploads/2012/07/wwdc2.jpg"><img src="/algoliasearch-jekyll-hyde/assets/wwdc2.jpg" alt="WWDC Message 2" /></a>Thank you again for your help Thomas!</p>


  </div>
  
  <div class="post">
    <h1 class="post-title">
      <a href="/algoliasearch-jekyll-hyde/2012/07/24/need-performance-on-mobile-use-c-cpp/">
        C/C++ is still the only way to have high performance on Mobile
      </a>
    </h1>

    <span class="post-date">24 Jul 2012</span>

    <p>When it comes to programming languages and performance, you can read all and
its opposite on the web. It’s definitely a very controversial topic!</p>

<p><strong>[Edit 15-Nov-2012]</strong> I had questions on <a href="http://redd.it/136hny">reddit</a> about the data-structures and algorithms we used. We develop an <a href="http://www.algolia.com">embedded search engine</a> for mobile, and tests were done on our own data-structure that is far more efficient than SQLite or other platform options for this use-case. <strong>[/Edit]</strong></p>

<p>For Algolia the story started when researching an instant suggest algorithm. I
used Java for two reasons:</p>

<ul>
  <li><strong>Main reason</strong>: our first client was using Java on Google App Engine</li>
  <li><strong>Secondary</strong>: at that stage, I was doing a lots of refactoring and Eclipse is very efficient for these tasks</li>
</ul>

<p>Once our algorithm was designed, I started to optimize performance on a
desktop computer (core I7 950). For this, I indexed all titles of the English
version of Wikipedia (4 millions titles). I optimized the Java code mainly by
reducing the number of allocations. All instant suggest queries were then
faster than 10ms.</p>

<p>As we planned from the begining to support iOS and Android, I needed to
optimize for high performance on mobile. I then ported the Java code to
Android and ended up with a few modifications (we needed to support old
Android versions which have not a full support of Java SDK).</p>

<p>In order to test performance, I created a small “demo” app: CitiesSuggest, a
mobile application based on Geonames database to look for a city name. I
filled the index with all places with a known population. In the end, the
database contained 270 000 city names.</p>

<p>As could be expected, the resulting application was quite sluggish on my
Galaxy S2. The worst queries could take more than one second of CPU.</p>

<p>I then applied all possible methods described in the <a href="http://developer.android.com/guide/practices/performance.html">Anroid
documentation</a>
and was able to reduce the response time to 700ms for the longest queries.
This is better but still gives end-users an impression of sluggishness!
Fortunately, common queries worked well enough to present our very first demos
at <a href="http://blog.algolia.com/great-discussions-at-leweb12-london/">LeWeb’12 London</a>. I was subsequently able to improve the user experience a lot
by adding asynchronous support. At that point, we decided to start
implementing the objective-C version for iOS.</p>

<p>I started a new implementation fully done in objective-C from scratch without
any premature optimization. I then developed the same CitiesSuggest
application for iOS. I first got stuck with some basic UI stuff. For example I
needed to reimplement an UILabel that supports highlighting! The standard
UILabel does no support this, and other implementations like Three20 just have
too many dependencies (you can download AlgoliaUILabel on
<a href="http://github.com/algolia/UILabel">github</a>, I released  the code under Apache
licence). Once the UI was ready, I could see the actual performance was
catastrophic! Instant suggest queries were between 200ms and 10 seconds on an
iPhone 4S!</p>

<p>After profilling, I discovered that 95% of the time was spent in Objective-C
messaging and ARC. Actually, I have millions of calls to very small methods
with 1 or 2 lines of code, and I found a very good explanation in the internal
of objc_msgSend (mainly on <a href="http://www.mikeash.com/pyblog/friday-qa-2009-03-20-objective-c-messaging.html)">mikeask.com</a>. There is in fact a hash table
lookup behind objc_msgSend! This explains most of my performance problems.</p>

<p>To fix these problems, I started to replace all this low level objective-C
implementation by a C++ implementation with inlined methods. Eventually, I
finished with Objective-C code for high level classes while all the core was
C++.</p>

<p>This change has dramatically improved performance with instant-search queries
between 2ms and 90ms on a iPhone 4S. I struggled to find complex enough
queries to reach 90ms! This resulted in a very nice user experience with a
remarkably slick demo :)</p>

<p>After this succes, I decided to use the same C++ code on Android with Android
NDK. With this approach I reduced our maximum query time from 700ms to 80ms on
a Galaxy S2. But I was really disappointed by the Android display, as I did
not reach the same level of interactive experience that I had with iOS. The
display of results stays slower on Android, probably because I did not spend
enough time to optimize this part.</p>

<p>In the end, I lost a lot of time with Java and Objective-C trying to optimize
code when the real solution was to use C/C++. I am fully convinced that it is
just not possible to reach the same speed with Objective-C only or Java only.</p>

<p>And there is also another good property with C++ code: Blackberry supports
C++, and there is large chance that Windows Phone 8 SDK will support C++ when
released in a few weeks. Actually, I do not see any other alternative than
C/C++ when you are looking for performance on mobile devices, which is our
case :)</p>

<p>I hope this article will prevent you from spending as much time on
Java/Objective-C optimizations as I did.</p>


  </div>
  
  <div class="post">
    <h1 class="post-title">
      <a href="/algoliasearch-jekyll-hyde/2012/07/12/ios-when-arc-is-a-bad-idea/">
        iOS: When Automatic Reference Counting is a Bad Idea
      </a>
    </h1>

    <span class="post-date">12 Jul 2012</span>

    <p>I started developing for iOS in 2009 by learning about the Objective-C
language. At that time ARC (Automatic Reference Counting) was not yet
available and developers were responsible for alloc/release/autorelease. I
found it pretty straightforward as it was very similar to C++ and the
resulting code was very self-explanatory.</p>

<p>When ARC was released at the end of 2011 it made a great impression on me and
looked like the perfect feature for any programmer coming from the Java world
who was not familiar with memory management. I started using ARC and
discovered a major flaw that completely changed my mind. Here is an example :</p>

<p>[Edit 28-Jan-2013] This post describes a bug in ARC that was fixed in Xcode
4.4.[/Edit]</p>

<p>Let’s start with an example in C++, the sample contains a constructor that
allocates two vectors, a destructor that destroys them and a compute method
that just performs a swap between the two vectors. This code is perfectly
valid and a swap is the perfect operation when you have two sets of data to
maintain because this is very efficient (just two pointers copy, no data
copy).</p>

<pre><code>class Example {
public:
  Example() {
    nextPositions = new std::vector&lt;int&gt;();
    currentPositions = new std::vector&lt;int&gt;();
  }
  ~Example() {
    delete nextPositions;
    delete currentPositions;
  }

  void compute() {
    // some code here
    std::swap(nextPositions, currentPositions);
    // some other code here
  }

private:
  std::vector&lt;int&gt;* nextPositions;
  std::vector&lt;int&gt;* currentPositions;
};
</code></pre>

<p>Before ARC the objective-C code was very similar and perfectly valid:</p>

<pre><code>// headers
@interface Example : NSObject {
  NSMutableArray* nextPositions;
  NSMutableArray* currentPositions;
}
-(void) compute;
@end

// implementation
@implementation Example
-(id) init {
  self = [super init];
  if (!self)
    return nil;
  nextPositions = [[NSMutableArray alloc] init];
  currentPositions = [[NSMutableArray alloc] init];
  return self;
}

-(void) dealloc {
  [super dealloc];
  [nextPositions release];
  [currentPositions release];
}

-(void) compute
{
  // some processing stuff here
  NSMutableArray* tmp = nextPositions;
  nextPositions = currentPositions;
  currentPositions = tmp;
  // some processing stuff here
}
@end
</code></pre>

<p>The semantics are very clear, it is exactly the same as in C++.</p>

<p>So when you start using ARC you tend to do exactly the same thing with less
code, and you just delete the dealloc method:</p>

<pre><code>// headers
@interface Example : NSObject {
  NSMutableArray* nextPositions;
  NSMutableArray* currentPositions;
}
-(void) compute;
@end

// implementation
@implementation Example
-(id) init {
  self = [super init];
  if (!self)
    return nil;
  nextPositions = [[NSMutableArray alloc] init];
  currentPositions = [[NSMutableArray alloc] init];
  return self;
}

-(void) compute {
  // some processing stuff here
  NSMutableArray* tmp = nextPositions;
  nextPositions = currentPositions;
  // Wrong, at that step this is too late! nextPositions was deallocated
  currentPositions = tmp;
  // some processing stuff here
}
@end
</code></pre>

<p>The error does not come from a missing strong attribute, because instance
variables are strong by default. The problem is that ARC does not generate
code in the variable assignation. You should explicitely add properties and
use “self.variableName” notation like in the next example. I would encourage
ARC designers to read this excellent article by Joel Spolsky <a href="http://www.joelonsoftware.com/articles/Wrong.html">“Making Wrong
Code Look Wrong”</a>. This ARC
usage is a perfect example of wrong code that looks perfect but leads me to
the conclusion that ARC is not trustworthy.</p>

<p>Here is the correct version:</p>

<pre><code>// headers
@interface Example : NSObject {
  NSMutableArray* nextPositions;
  NSMutableArray* currentPositions;
}
-(void) compute;
@property (strong, nonatomic) NSMutableArray* nextPositions;
@property (strong, nonatomic) NSMutableArray* currentPositions;
@end

// implementation
@implementation Example
-(id) init {
  self = [super init];
  if (!self)
    return nil;
  nextPositions = [[NSMutableArray alloc] init];
  currentPositions = [[NSMutableArray alloc] init];
  return self;
}

-(void) compute {
  // some processing stuff here
  NSMutableArray* tmp = self.nextPositions;
  self.nextPositions = self.currentPositions;
  self.currentPositions = tmp;
  // some processing stuff here
}
@synthesize nextPositions;
@synthesize currentPositions;
@end
</code></pre>

<p>I am surprised Apple hasn’t corrected that flaw yet. This is a major issue as
ARC does not generate code for variable affectation like it does for
properties (if one of you reads this post and has a complete explanation,
please tell me!):</p>

<ul>
  <li>Is it because of a performance issue? I would prefer to have no ARC at all than to see such a behavior.</li>
  <li>Is this case too complex to be handled? The problem is it undermines ARC’s utility and might get stuck at the prototype stage.</li>
</ul>

<p>To me, this is a perfect example of a technology driven product. The engineers
know their product so well that they forget to step back and look at it with a
fresh eye to analyse the full complexity of their system.</p>

<p>And that leaves me with two important lessons we’ll try to apply to our
products:</p>

<ul>
  <li>Always organize user tests, even when your users are developers themselves!</li>
  <li>Always keep a fresh eye when trying to simplify a product (this one may prove particularly difficult!)</li>
</ul>

<p>I hope you’ll tell us when we will (inevitably) break these rules!</p>


  </div>
  
  <div class="post">
    <h1 class="post-title">
      <a href="/algoliasearch-jekyll-hyde/2012/07/08/were-participating-to-the-evernote-devcup/">
        Search for Evernote: We're in the Evernote DevCup!
      </a>
    </h1>

    <span class="post-date">08 Jul 2012</span>

    <p>You mint already be familiar with Evernote. It’s a great company that delivers
an impressive product that I use often, both professionally and personally.
When we heard about them organizing their second developer competition, we
immediately thought about the fantastic opportunity it could be for Algolia!</p>

<p>Let’s sum up:</p>

<ul>
  <li>It’s an excellent use case for our first lib: search in Evernote mobile apps is quite awful and we could really bring a better user experience!</li>
  <li>It’s a good incentive to create a second demo (after Cities Suggest) that’s more convincing, especially for Evernote’s users.</li>
  <li>It’s an opportunity to get some media coverage :)</li>
  <li>And most of all it’s an excellent occasion to pitch our lib to the Evernote team. We would love to have them as an happy customer!</li>
</ul>

<p>As you see, even if we don’t make it to the finals, the decision was a no-
brainer! But, wait… we’d love to go to the finals! <strong>And you can help us!</strong>
Part of the competition is to get the maximum public support. You want to hep
us? Just go to our <a href="http://devcup.evernote.com/submissions/8585-search-for-evernote">submission
page</a> and
vote once a day! Tell your friends! Tell your grandma! You can even log in via
facebook ;)</p>

<p>Want to know more about our app “Search for Evernote”? Here comes the video.
You can also download the app directly from
<a href="http://www.algolia.com/evernote.html">http://www.algolia.com/evernote.html</a></p>


  </div>
  
</div>

<div class="pagination">
  
    <a class="pagination-item older" href="/algoliasearch-jekyll-hyde/page16">Older</a>
  
  
    
      <a class="pagination-item newer" href="/algoliasearch-jekyll-hyde/page14">Newer</a>
    
  
</div>
</div>

      <div class="algolia__search-content js-algolia__search-content">
        <h1 class="page-title">Search</h1>
        <div class="posts algolia__results"></div>
      </div>
    </div>

  <script>
  window.ALGOLIA_CONFIG = {
    'applicationId': 'latency',
    'indexName': 'jekyll',
    'apiKey': '6be0576ff61c053d5f9a3225e2a90f76',
    'baseurl': '/algoliasearch-jekyll-hyde'
  }
</script>
<script id="algolia__template" type="text/template">

  <div class="algolia__result">
    <a class="algolia__result-link" href="{{ full_url }}#algolia:{{ css_selector }}">{{{ _highlightResult.title.value }}}</a>
    {{#posted_at}}
    <div class="algolia__result-date">{{ posted_at_readable }}</div>
    {{/posted_at}}
    <div class="algolia__result-text">{{{ _highlightResult.text.value }}}</div>
  </div>

</script>
<script id="algolia__template--no-results" type="text/template">
  No results found.
</script>
<script src="//cdn.jsdelivr.net/jquery/2.1.4/jquery.min.js"></script>
<script src="//cdn.jsdelivr.net/algoliasearch/3.6.0/algoliasearch.min.js"></script>
<script src="//cdn.jsdelivr.net/algoliasearch.helper/2.1.0/algoliasearch.helper.min.js"></script>
<script src="//cdn.jsdelivr.net/hogan.js/3.0.2/hogan.min.js"></script>
<script src="//cdn.jsdelivr.net/momentjs/2.10.3/moment.min.js"></script>
<script src="/algoliasearch-jekyll-hyde/public/js/algolia.js"></script>

  </body>
</html>
